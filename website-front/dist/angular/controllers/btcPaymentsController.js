/*
 AugustoLemble 2016-01-14 
*/
angular.module("ALapp.controllers").controller("btcPaymentsController",["$scope","sessionService","publicService","$window",function(a,b,c,d){console.log("btcPaymentsController init"),a.words=b.getStrings(),a.language=a.words.language,a.paymentsWaiting=[],a.paymentsDone=[],a.addressesFree=[],a.addressesWaiting=[],a.paymenstFunctions=[],a.paymentQuantity=.001,a.paymentOperation="",a.paymentMessage="",c.getAddressesWaiting().then(function(b){console.log("Addresses waiting:"),a.addressesWaiting=b.data.addresses,console.log(a.addressesWaiting)}),c.getAddressesFree().then(function(b){console.log("Addresses free:"),a.addressesFree=b.data.addresses,console.log(a.addressesFree)}),c.getPaymentsDone().then(function(b){console.log("Payments done:"),a.paymentsDone=b.data.payments,console.log(a.paymentsDone)}),c.getPaymentsWaiting().then(function(b){console.log("Payments waiting:"),a.paymentsWaiting=b.data.payments,console.log(a.paymentsWaiting)}),c.getOnCompleteFuctions().then(function(b){console.log("Payment functions:"),a.onCompleteFunctions=b.data.functions,console.log(a.onCompleteFunctions),a.onCompleteFunctions[0]&&(a.paymentOperation=a.onCompleteFunctions[0].name)}),a.createPayment=function(){c.createBTCPayment(a.paymentOperation,a.paymentQuantity,a.paymentMessage).then(function(a){a.data.success&&d.location.reload()})}}]);